<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>kite-string(凧糸)というtakosanクライアントを公開してPyPIデビューしていた - 続・ラフなラボ</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="http://memo.laughk.org/images/favicon.ico" rel="icon">

    <!-- Open Graph tags -->
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="kite-string(凧糸)というtakosanクライアントを公開してPyPIデビューしていた"/>
            <meta property="og:url" content="http://memo.laughk.org/2015/06/07/kite-string-release.html"/>
            <meta property="og:description" content="TL;DR takosan 向けの簡単なコマンドラインクライアントをpythonで書いてみた ついでに PyPI デビューもできてよかった"/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://memo.laughk.org/theme/css/bootstrap.sandstone.min.css" type="text/css"/>
    <link href="http://memo.laughk.org/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://memo.laughk.org/theme/css/pygments/solarizeddark.css" rel="stylesheet">
    <link rel="stylesheet" href="http://memo.laughk.org/theme/css/style.css" type="text/css"/>
        <link href="http://memo.laughk.org/static/custom.css" rel="stylesheet">

        <link href="http://memo.laughk.org/atom.xml" type="application/atom+xml" rel="alternate"
              title="続・ラフなラボ ATOM Feed"/>
        <link href="http://memo.laughk.org/rss.xml" type="application/atom+xml" rel="alternate"
              title="続・ラフなラボ RSS Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://memo.laughk.org/" class="navbar-brand">
続・ラフなラボ            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/pages/about.html">About</a></li>
                    <li><a href="/rss.xml"><i class="fa fa-rss"></i>RSS</a></li>
                    <li><a href="https://twitter.com/laugh_k"><i class="fa fa-twitter"></i>twitter</a></li>
                    <li><a href="https://github.com/laughk"><i class="fa fa-github"></i>Github</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://memo.laughk.org/archives"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-lg-12">

    <section id="content">
        <article>
            <header class="page-header">
                <span class="label label-default">
                    <i class="fa fa-calendar"></i>
                        2015-06-07
                </span>
                <h1>
                    <a href="http://memo.laughk.org/2015/06/07/kite-string-release.html"
                       rel="bookmark"
                       title="Permalink to kite-string(凧糸)というtakosanクライアントを公開してPyPIデビューしていた">
                        kite-string(凧糸)というtakosanクライアントを公開してPyPIデビューしていた
                    </a>
                </h1>
                    <div id="fb-root"></div>
                    <script>
                    (function(d, s, id) {
                      var js, fjs = d.getElementsByTagName(s)[0];
                      if (d.getElementById(id)) return;
                      js = d.createElement(s); js.id = id;
                      js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId=1412228335678506";
                      fjs.parentNode.insertBefore(js, fjs);
                    }(document, 'script', 'facebook-jssdk'));
                    </script>
            </header>
            <div class="entry-content">
                <h2>TL;DR</h2>
<ul>
<li><a href="https://github.com/kentaro/takosan">takosan</a> 向けの簡単なコマンドラインクライアントをpythonで書いてみた</li>
<li>ついでに PyPI デビューもできてよかった</li>
</ul>


<hr />
<p>会社のチャットツールがSlackになってからは通知面ですっかりお馴染みになったSlack版ikachanの<a href="https://github.com/kentaro/takosan">takosan</a>。<br />
特に最近では <a href="https://github.com/kentaro/takosan/pull/5">dojinekoさんの素晴らしいPR</a>が取り込まれてHTTPリクエストだけでかなりいい感じの通知ができるようになりました。</p>
<p>ただパラメタが増えて今まで通りコマンドラインで <code>curl</code> で色々やるときに結構面倒になってきたので、同じようなノリで使える雑なCLI wrapperをpythonで作ってみました。</p>
<ul>
<li><a href="https://github.com/laughk/kite-string">laughk/kite-string</a></li>
<li>PyPI: <a href="https://pypi.python.org/pypi/kite-string">https://pypi.python.org/pypi/kite-string</a></li>
</ul>
<h3>使い方とかInstall方法とか</h3>
<p>PyPIに公開していますので以下のとおりでインストールできます。<br />
あまり細かく動作確認はできていませんが、python2.6以降(3系も含む)なら動きます。
(python環境は必要に応じて <code>virtualenv</code> なりと組み合わせてください)</p>
<div class="highlight"><pre><span class="nv">$ </span>pip install kite-string
</pre></div>


<h3>できること</h3>
<ul>
<li><a href="https://github.com/kentaro/takosan/pull/5">dojinekoさんのPR</a>のサンプル内にある key にそのまま対応するオプションを用意してます。( ただし field 周りはまだ実装できてないので未対応です。)</li>
<li><code>--channel</code> オプションを複数指定すれば複数チャンネルに同時にポストすることも出来ます。</li>
</ul>
<h4>使用例</h4>
<div class="highlight"><pre><span class="nv">$ </span>kite <span class="se">\</span>
&gt; --channel<span class="o">=</span><span class="s2">&quot;@laughk&quot;</span> <span class="se">\</span>
&gt; --message<span class="o">=</span><span class="s2">&quot;*Hello* \`shachikun\`&quot;</span> <span class="se">\</span>
&gt; --icon<span class="o">=</span><span class="s2">&quot;:ocra:&quot;</span> <span class="se">\</span>
&gt; --name<span class="o">=</span><span class="s2">&quot;shachikun&quot;</span> <span class="se">\</span>
&gt; --color<span class="o">=</span><span class="s2">&quot;#3498db&quot;</span> <span class="se">\</span>
&gt; --pretext<span class="o">=</span><span class="s2">&quot;Tell you about slack :ocean:&quot;</span> <span class="se">\</span>
&gt; --author-name<span class="o">=</span><span class="s2">&quot;Slack&quot;</span> <span class="se">\</span>
&gt; --author-icon<span class="o">=</span><span class="s2">&quot;https://slack.global.ssl.fastly.net/272a/img/icons/favicon-32.png&quot;</span> <span class="se">\</span>
&gt; --author-link<span class="o">=</span><span class="s2">&quot;https://slack.com/&quot;</span> <span class="se">\</span>
&gt; --title<span class="o">=</span><span class="s2">&quot;Slack (software)&quot;</span> <span class="se">\</span>
&gt; --title-link<span class="o">=</span><span class="s2">&quot;http://ja.wikipedia.org/wiki/Slack_(software)&quot;</span> <span class="se">\</span>
&gt; --text<span class="o">=</span><span class="s2">&quot;Slack is a team communication tool co-founded by Stewart Butterfield, Eric Costello, Cal Henderson, and Serguei Mourachov. Slack began as an internal tool used by their company Tiny Speck in the development of Glitch, the defunct online game. Slack was launched in August, 2013, and signed up 8000 customers within 24 hours of launch.&quot;</span> <span class="se">\</span>
&gt; --image-url<span class="o">=</span><span class="s2">&quot;https://slack.global.ssl.fastly.net/558b/img/slack_logo.png&quot;</span> <span class="se">\</span>
&gt; http://takosan.example.com:4979
</pre></div>


<p><img alt="image" src="/images/2015/06/70f30678-038d-11e5-829f-05f898c4e4f2.png" /></p>
<h4>補完</h4>
<p>bashは<a href="http://click.pocoo.org/4/bashcomplete/">clickの補完生成</a>で、zshは<a href="https://pypi.python.org/pypi/genzshcomp/0.5.2">genzshcomp</a>で生成して completion も用意してみました。</p>
<p><a href="https://github.com/laughk/kite-string/tree/master/data">https://github.com/laughk/kite-string/tree/master/data</a></p>
<ul>
<li>
<p>bash</p>
<p><img alt="image" src="/images/2015/06/5d4522a0-038d-11e5-9ff6-8f7e46e5d63e.jpg" /></p>
</li>
<li>
<p>zsh</p>
<p><img alt="image" src="/images/2015/06/640292da-038d-11e5-9f5c-ea691de49f89.jpg" /></p>
</li>
</ul>
<hr />
<h3>ついでにPyPIデビューもできた</h3>
<p>この kite-string は元も「オレオレ便利ツールにして社内GH;E環境くらいにとどめとうこうかな」と思ってたのですが
よくよく考えると takosan そのものがオープンなツールなわけで別に公開しない理由もなさそうと思ったので、<code>setup.py</code> の書き方を調べてPyPIに登録するところまでやってみました。</p>
<p>そのあたりを調べるときにdistributeなど古い情報が多数引っかかってしまってなかなかほしい情報が出てこなかったのですが、<a href="https://github.com/fabric/fabric">fabric</a>など普段お世話になっているモジュールの<code>setup.py</code>の中身を読んでみたりすると非常に参考になりました。</p>
<p>またpythonプロフェッショナルプログラミング(第2版)にパッケージ作成の解説があり、そちらも非常に参考になりました。</p>
<iframe src="http://rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=laughk-22&o=9&p=8&l=as4&m=amazon&f=ifr&ref=ss_til&asins=B00XZTYMG6" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

<hr />
<p>kite-string 本当にシンプルにtakosanのURL向けにリクエストを投げることしかしない雑なツールではあるのだけど、
新卒の頃からずっと「コード書いて自分でツールを作って公開してみたい」と思い続けてきた目標がひょうんなことから達成することができました。</p>
<p>これまで頑張ってコード書いてみても公開したりするのが億劫でなかなか一歩踏み出せないところもあったけど、<br />
少なくともPyPIに登録することに対する抵抗は大分なくなったし、精神的にひとつの壁を越えられた感じがあってこれからは隙あらばどんどん自分で作ったコードを出していこうという気持ちになれたので kite-string は公開してみて本当に良かったと思います。</p>
                <div class="panel">
                    <div class="panel-body">
                    <!-- <div class="alert alert-dismissable alert-warning"> -->
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2015-06-07T00:00:00+09:00"> 2015-06-07</time>
    </span>
    <span class="label label-default">By</span>
    <a href="http://memo.laughk.org/pages/about.html"><i class="fa fa-user"></i> Kei Iwasaki</a>



<span class="label label-default">Tags</span>
	<a href="http://memo.laughk.org/tag/python.html">python</a>
        /
	<a href="http://memo.laughk.org/tag/slack.html">slack</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
            </div>
            <!-- /.entry-content -->
<!-- AddThis Button BEGIN -->
<div class="social_tools">

    <a href="http://b.hatena.ne.jp/entry/http://memo.laughk.org/2015/06/07/kite-string-release.html" class="hatena-bookmark-button" data-hatena-bookmark-title="続・ラフなラボ" data-hatena-bookmark-layout="simple-balloon" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>

        <div class="fb-like" data-href="http://memo.laughk.org/2015/06/07/kite-string-release.html" data-width="110px" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>

        <a href="https://twitter.com/share" class="twitter-share-button addthis_button_tweet" data-lang="ja" data-related="laugh_k">ツイート</a>

        <script>
            !function(d,s,id){
              var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';
                if(!d.getElementById(id)){
                  js=d.createElement(s);
                    js.id=id;
                    js.src=p+'://platform.twitter.com/widgets.js';
                    fjs.parentNode.insertBefore(js,fjs);
                }
            }(document, 'script', 'twitter-wjs');
        </script>

        <div class="g-plusone "></div>

        <script type="text/javascript">
          window.___gcfg = {lang: 'ja'};
          (function() {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
          })();
        </script>

        <a data-pocket-label="pocket" data-pocket-count="horizontal" class="pocket-btn" data-lang="ja"></a>
        <script type="text/javascript">
            !function(d,i){
              if(!d.getElementById(i)){
                var j=d.createElement("script");
                j.id=i;
                j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";
                var w=d.getElementById(i);d.body.appendChild(j);
              }
            }(document,"pocket-btn-js");
        </script>


</div>
<!-- AddThis Button END -->            <div class="adsense">
               <!-- Google Adsense -->
               <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
               <!-- memo.laughk.org-postfoot -->
               <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-pub-8841652702834940"
                    data-ad-slot="4223982601"
                    data-ad-format="auto"></ins>
               <script>
               (adsbygoogle = window.adsbygoogle || []).push({});
               </script>
               <!-- Google Adsense END -->
            </div>
    <hr />
    <section class="comments" id="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'memolaughkorg'; // required: replace example with your forum shortname
            var disqus_identifier = 'kite-string-release';
            var disqus_url = 'http://memo.laughk.org/2015/06/07/kite-string-release.html';
            var disqus_config = function () {
                this.language = "ja";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
    </div>
</div>
<footer class="all">
   <div class="container">
      <div class="row">
        <div class="col-lg-3">
<h4><i class="fa fa-user fa-lg"></i><span class="icon-label">About Me</span></h4>
<div>
  <img src="/images/laughk.jpg" align="button" id="author_img">
  Kei Iwasaki
</div>
<ul id="social">
  <li class="list-group-item">
    <a href="https://twitter.com/laugh_k">
      <i class="fa fa-twitter-square fa-lg"></i> twitter
    </a>
  </li>
  <li class="list-group-item">
    <a href="https://github.com/laughk">
      <i class="fa fa-github-square fa-lg"></i> github
    </a>
  </li>
</ul>        </div>

        <div class="col-lg-5">

<h4><i class="fa fa-th-list fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
<ul id="recentposts">
    <li class="list-group-item">
        <i class="fa fa-file-text fa-lg"></i>
        <a href="http://memo.laughk.org/2015/10/18/pyconjp2015-report.html">
            PyConJP 2015 に行ってきた #pyconjp
        </a>
    </li>
    <li class="list-group-item">
        <i class="fa fa-file-text fa-lg"></i>
        <a href="http://memo.laughk.org/2015/06/07/kite-string-release.html">
            kite-string(凧糸)というtakosanクライアントを公開してPyPIデビューしていた
        </a>
    </li>
    <li class="list-group-item">
        <i class="fa fa-file-text fa-lg"></i>
        <a href="http://memo.laughk.org/2015/04/05/blog-build-ci-by-wercker.html">
            ブログのデプロイにWerckerを使って楽に投稿できる環境にした
        </a>
    </li>
    <li class="list-group-item">
        <i class="fa fa-file-text fa-lg"></i>
        <a href="http://memo.laughk.org/2014/12/09/tmux-ssh-logging.html">
            tmux 内で SSH した時のロギングを自動でやる
        </a>
    </li>
    <li class="list-group-item">
        <i class="fa fa-file-text fa-lg"></i>
        <a href="http://memo.laughk.org/2014/10/26/get-twitpic-img-by-shellart.html">
            TwitPicに上げてる画像をシェル芸で救出してみた
        </a>
    </li>
</ul>

        </div>

        <div class="col-lg-4">

<h4><i class="fa fa-star fa-lg"></i><span class="icon-label">Popular Posts</span></h4>
<script language="javascript" type="text/javascript" src="http://b.hatena.ne.jp/js/widget.js" charset="utf-8"></script>
<script language="javascript" type="text/javascript">
Hatena.BookmarkWidget.url   = "http://memo.laughk.org";
Hatena.BookmarkWidget.sort  = "count";
Hatena.BookmarkWidget.width = 0;
Hatena.BookmarkWidget.num   = 5;
Hatena.BookmarkWidget.theme = "hatenadiary";
Hatena.BookmarkWidget.load();
</script>        </div>

      <hr />

       <div class="col-xs-10">&copy; 2015 Kei Iwasaki
          &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
          <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
          <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>       </div>
       <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="//code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://memo.laughk.org/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://memo.laughk.org/theme/js/respond.min.js"></script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'memolaughkorg'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-16164514-8']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();

    </script>
</body>
</html>