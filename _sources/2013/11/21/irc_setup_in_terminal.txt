快適Terminal環境計画 - IRC -
======================================

| 前から tmux と組み合わせて irc bouncer 的な使い方をしていた weechat ですが。
| いい加減本格的に移行したのでメモ。
| ちなみに私は今のところ Ubuntu13.10 な 24時間起動のサーバ立てて使っとります。

.. more::

インストール
----------------------

ググって出てくる情報見るとapt版だとISO-2022-JPガーみたいな話あるようですが、最近は特に問題ないようです。

.. sourcecode:: sh

    sudo aptitude install weechat

プラグインとか
----------------------

| デフォで起動してもいいかもしれないですが、ここは先人の知恵に従って便利なプラグインを導入します。
| 今のところは最低限以下のものだけ入れるだけでもだいぶ違います。

* weeget
    weechatのプラグインを管理できるプラグイン

* growl
    ハイライトしたキーワードをネットワーク経由でGrowl通知してくれる。

* highmon
    ハイライトしたキーワードのレスだけを流してくれるバッファができる。

* buffers
    横に接続中のサーバ、入室中のチャンネルなどバッファの一覧を出してくれる。

* go
    指定したチャンネルにダイレクトにジャンプできる。関係ないチャンネルを既読にしないで飛べるので地味に便利。

| まずはweegetを導入して、他のプラグインを入れてあげればいい感じです。
| 手順はこちらに従え問題無いかと -> `Weegetを利用して、WeeChatのPlugin管理を楽にする <http://blog.glidenote.com/blog/2012/02/11/weechat-plugins/>`_


起動/設定
-----------------------

~/.weechat/logger.conf
~~~~~~~~~~~~~~~~~~~~~~~~

| ロギングはしときたいんでloggerの設定を以下のように変更します。


.. sourcecode:: sh

    mask = "%plugin.$name/%Y%m%d.weechatlog"



~/.tmux.conf
~~~~~~~~~~~~~~~~~~~~~~~~

| tmux 内であげっぱなしにするので以下の設定も追加しときます。これをやっとかないと表示がおかしくなります。
| 基本的にIRC内で流れていることは常にキャッチしておきたいのです。(まあbouncer使えよって話かもしれないですが)

.. sourcecode:: sh

    set -g default-terminal "screen-256color"


起動
~~~~~~~~~~~~~~~~~~~~~~~~

| このあたりでtmux -> weechatを起動

.. sourcecode:: sh

    tmux
    weechat-curses

設定
~~~~~~~~~~~~~~~~~~~~~

| 接続先の設定

.. sourcecode:: irc

    ## 普通のIRCサーバの場合
    /server add example1 irc.example1.com/6667

    ## SSL かつ 起動時に自動で接続するように
    /server add example2 irc.example2.com/6667 -ssl -autoconnect

|
| オレオレ証明書(自己署名証明書)なSSLな場合は以下も実行します。
|

.. sourcecode:: irc

    /set irc.server.example.ssl_verify = off


|
| 自分の名前とか拾いたいワードをhighlightに追加しときます
|

.. sourcecode:: irc

    /set weechat.look.highlight *iwasaki*,*laughk*

|
| growl プラグイン接続先も追加
| 当然クライントPCにGrowlが入っていることが条件。ネットワーク経由での通知もできるようにしとく。
|

.. sourcecode:: irc

    ## 通常使うクライアントPCのIP情報
    /set plugins.ver.python.growl.hostname 192.168.xxx.yyy

    ## クライアント側のGrowlパスワード
    /set plugins.var.python.growl.password ****************


|
| go プラグインのキーバインドもやっとく。
| ひとまずバッティングしなさそうだった Alt+g で
|

.. sourcecode:: irc

    /key bind meta-g /go

|
| iso-2022-jp なチャンネルは文字コードの設定も忘れずに。
| 特にweechatは結構いい感じに文字コード直してくれたりするんで自分では化けてることに気づかないケースもあります。
|

.. sourcecode:: irc

    ## 対象のチャンネルで
    /charset iso2022jp

|
| 他の細かいところなども `公式のドキュメント <http://www.weechat.org/doc/>`_ 見ながら設定をして 
| 大体いいかなというところで変更を保存します。
|

.. sourcecode:: irc

    /save

|
| こんな感じ。まあほぼ見せられないのでモザイクだらけですが
|


.. image:: shot2013-11-23_1.png

|
| Yea!!
|

.. author:: default
.. categories:: none
.. tags:: terminal, weechat, irc
.. comments::
